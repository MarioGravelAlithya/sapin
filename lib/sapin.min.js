!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r(require("lodash"),require("date-fns")):"function"==typeof define&&define.amd?define("sapin",["lodash","date-fns"],r):"object"==typeof exports?exports.sapin=r(require("lodash"),require("date-fns")):e.sapin=r(e._,e.datefns)}(window,(function(e,r){return function(e){var r={};function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var i in e)t.d(n,i,function(r){return e[r]}.bind(null,i));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="",t(t.s=7)}([function(r,t){r.exports=e},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isEmptyValue=r.isPureObject=void 0;var n=t(0);r.isPureObject=function(e){return(0,n.isObject)(e)&&!(0,n.isArray)(e)&&!(0,n.isFunction)(e)},r.isEmptyValue=function(e){return null==e||""===e}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.Errors={required:"sapin.required",isInteger:"sapin.invalidInteger",isPositive:"sapin.valueShouldBePositive",isNegative:"sapin.valueShouldBeNegative",isGt:"sapin.valueShouldBeGt",isGte:"sapin.valueShouldBeGte",isLt:"sapin.valueShouldBeLt",isLte:"sapin.valueShouldBeLte",isEqualToField:"sapin.valueShouldEqualField",isGtField:"sapin.valueShouldBeGtField",isGteToField:"sapin.valueShouldBeGteField",isLtField:"sapin.valueShouldBeLtField",isLteToField:"sapin.valueShouldBeLteField",withinRange:"sapin.valueNotInRange",minLength:"sapin.valueNotLongEnough",maxLength:"sapin.valueTooLong",oneOf:"sapin.oneOf",isEmail:"sapin.invalidEmail",isOfTypeArray:"sapin.notAnArray",isOfTypeObject:"sapin.notAnObject",isNumber:"sapin.invalidNumber",isOfTypeBool:"sapin.notBoolean",isOfTypeString:"sapin.notString",isOfTypeDate:"sapin.invalidDate"}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.dictionary=r.arrayOf=r.object=r.boolean=r.date=r.number=r.string=r.ValueTypes=void 0,r.PropertyDefinition=g;var n,i=t(0),u=t(4),o=t(5),l=t(1),a=t(6),s=(n=a)&&n.__esModule?n:{default:n};var f=r.ValueTypes={value:"value",collectionOfValues:"collectionOfValues",collectionOfObjects:"collectionOfObjects"},c=function(e,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"validators";if(!(!!(0,i.isNil)(r)||(e===f.value?(0,i.isArray)(r)?(0,i.every)(r,i.isFunction):(0,i.isFunction)(r):(0,l.isPureObject)(r))))throw new TypeError(t+" must be a function or an array of functions")};function d(e,r){return(0,i.isArray)(e)?[r].concat(e):e?[r,e]:[r]}function p(e){if(!f[e])throw new TypeError("valueType must be one of the values defined in ValueTypes")}function v(e){if((0,i.isNil)(e)||!(0,i.isFunction)(e))throw new TypeError("getter must be a function")}function y(e){if(!(0,i.isNil)(e)&&!(0,i.isFunction)(e))throw new TypeError("transform must be a function")}function b(e){if(!(0,i.isNil)(e)&&!(0,i.isFunction)(e))throw new TypeError("typeValidator is optional but must be a Validation function if given")}function g(e,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;p(e),v(r),c(e,t),b(n),y(i),c(f.value,u,"collectionValidator"),this.valueType=e,this.getter=r,this.transform=i||r,this.validators=n?d(t,n):t,this.collectionValidator=u}r.string=function(e,r){var t=r&&!1===r.useTrim?u.getString:u.getTrimmedString;return new g(f.value,t,e,o.isOfTypeString)},r.number=function(e,r){var t=r&&!1===r.replaceComa?u.getNumber:u.getFriendlyNumber;return new g(f.value,t,e,o.isNumber)},r.date=function(e){return new g(f.value,u.getDate,e,o.isOfTypeDate)},r.boolean=function(e){return new g(f.value,u.getBool,e,o.isOfTypeBool)},r.object=function(e){return new g(f.value,i.identity,e,o.isOfTypeObject)};function m(e,r,t){c(f.value,r,"collectionValidator"),(0,i.isFunction)(e)?e=e():e instanceof s.default&&(e=e.schema);var n=function(e){if(e instanceof g)return f.collectionOfValues;if((0,l.isPureObject)(e))return f.collectionOfObjects;throw new TypeError("expect a type (ex.: string, number, etc.) or an object the expected properties")}(e);return r=d(r,t),new g(n,i.identity,e,null,null,r)}r.arrayOf=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return m(e,r,o.isOfTypeArray)},r.dictionary=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return m(e,r,o.isOfTypeObject)}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getBool=r.getDate=r.getNumber=r.getString=void 0,r.getTrimmedString=function(e){return(0,n.isNil)(e)?null:(0,n.trim)(e.toString())},r.getFriendlyNumber=function(e){(0,n.isNil)(e)?e=null:((0,n.isString)(e)&&(e=e.replace(",",".")),e=Number(e));return e};var n=t(0);r.getString=function(e){return(0,n.isNil)(e)?null:e.toString()};r.getNumber=function(e){return(0,n.isNil)(e)?null:Number(e)};r.getDate=function(e){return e?new Date(e):null},r.getBool=function(e){return!0===e||"true"===e||!1!==e&&"false"!==e&&null}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isOfTypeDate=r.isOfTypeString=r.isOfTypeBool=r.isNumber=r.isOfTypeObject=r.isOfTypeArray=void 0;var n=t(0),i=t(8),u=t(1),o=t(2);r.isOfTypeArray=function(e){var r=e.value;return r&&!(0,n.isArray)(r)?o.Errors.isOfTypeArray:null},r.isOfTypeObject=function(e){var r=e.value;return!r||!(0,n.isArray)(r)&&(0,n.isObject)(r)?null:o.Errors.isOfTypeObject},r.isNumber=function(e){var r=e.value,t=e.getter;return isNaN(t(r))?o.Errors.isNumber:null},r.isOfTypeBool=function(e){var r=e.value;return[!0,!1,"true","false",null,void 0,""].includes(r)?null:o.Errors.isOfTypeBool},r.isOfTypeString=function(e){var r=e.value;return(0,u.isEmptyValue)(r)||(0,n.isString)(r)?null:o.Errors.isOfTypeString},r.isOfTypeDate=function(e){var r=e.value,t=e.getter;return(0,u.isEmptyValue)(r)||(0,i.isValid)(t(r))?null:o.Errors.isOfTypeDate}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(0),i=t(3),u=t(1),o=t(4);function l(e,r,t){for(var s in e){var f=e[s];t?((0,n.isFunction)(f)||(0,n.isArray)(f))&&(f=e[s]=new i.PropertyDefinition(i.ValueTypes.value,o.getString,f)):(0,n.isFunction)(f)&&(f=e[s]=f());var c=r.concat([s]);if(f instanceof a)e[s]=f.schema;else if(f instanceof i.PropertyDefinition)f.valueType===i.ValueTypes.collectionOfObjects&&l(f.validators,c,t);else{if(!(0,u.isPureObject)(f)){var d=c.join(".");if(t)throw new TypeError("Expect a collection or validator at property "+d);throw new TypeError("Expect an object or a type function (ex.: string, number) in schema at property "+d)}l(f,c,t)}}}function a(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if((0,n.isNil)(e)||!(0,u.isPureObject)(e))throw new TypeError("schema must be a valid schema object");l(e,[],r),this.schema=e}r.default=a},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(6);Object.defineProperty(r,"Schema",{enumerable:!0,get:function(){return v(n).default}});var i=t(2);Object.defineProperty(r,"Errors",{enumerable:!0,get:function(){return i.Errors}});var u=t(4);Object.defineProperty(r,"getString",{enumerable:!0,get:function(){return u.getString}}),Object.defineProperty(r,"getFriendlyNumber",{enumerable:!0,get:function(){return u.getFriendlyNumber}}),Object.defineProperty(r,"getTrimmedString",{enumerable:!0,get:function(){return u.getTrimmedString}}),Object.defineProperty(r,"getDate",{enumerable:!0,get:function(){return u.getDate}}),Object.defineProperty(r,"getNumber",{enumerable:!0,get:function(){return u.getNumber}}),Object.defineProperty(r,"getBool",{enumerable:!0,get:function(){return u.getBool}});var o=t(9);Object.defineProperty(r,"isNegative",{enumerable:!0,get:function(){return o.isNegative}}),Object.defineProperty(r,"isPositive",{enumerable:!0,get:function(){return o.isPositive}}),Object.defineProperty(r,"isGt",{enumerable:!0,get:function(){return o.isGt}}),Object.defineProperty(r,"isGte",{enumerable:!0,get:function(){return o.isGte}}),Object.defineProperty(r,"isEqualToField",{enumerable:!0,get:function(){return o.isEqualToField}}),Object.defineProperty(r,"isGteToField",{enumerable:!0,get:function(){return o.isGteToField}}),Object.defineProperty(r,"isGtField",{enumerable:!0,get:function(){return o.isGtField}}),Object.defineProperty(r,"isInteger",{enumerable:!0,get:function(){return o.isInteger}}),Object.defineProperty(r,"isLt",{enumerable:!0,get:function(){return o.isLt}}),Object.defineProperty(r,"isLte",{enumerable:!0,get:function(){return o.isLte}}),Object.defineProperty(r,"isLteToField",{enumerable:!0,get:function(){return o.isLteToField}}),Object.defineProperty(r,"isLtField",{enumerable:!0,get:function(){return o.isLtField}}),Object.defineProperty(r,"withinRange",{enumerable:!0,get:function(){return o.withinRange}});var l=t(10);Object.defineProperty(r,"required",{enumerable:!0,get:function(){return l.required}}),Object.defineProperty(r,"requiredIfOtherFieldEquals",{enumerable:!0,get:function(){return l.requiredIfOtherFieldEquals}}),Object.defineProperty(r,"requiredIfOtherFieldIsFalse",{enumerable:!0,get:function(){return l.requiredIfOtherFieldIsFalse}}),Object.defineProperty(r,"requiredIfOtherFieldIsTrue",{enumerable:!0,get:function(){return l.requiredIfOtherFieldIsTrue}}),Object.defineProperty(r,"requiredIfOtherFieldIsEmpty",{enumerable:!0,get:function(){return l.requiredIfOtherFieldIsEmpty}}),Object.defineProperty(r,"requiredIfOtherFieldIsGiven",{enumerable:!0,get:function(){return l.requiredIfOtherFieldIsGiven}});var a=t(11);Object.defineProperty(r,"minLength",{enumerable:!0,get:function(){return a.minLength}}),Object.defineProperty(r,"maxLength",{enumerable:!0,get:function(){return a.maxLength}}),Object.defineProperty(r,"isEmail",{enumerable:!0,get:function(){return a.isEmail}}),Object.defineProperty(r,"oneOf",{enumerable:!0,get:function(){return a.oneOf}});var s=t(12);Object.defineProperty(r,"transform",{enumerable:!0,get:function(){return v(s).default}});var f=t(5);Object.defineProperty(r,"isNumber",{enumerable:!0,get:function(){return f.isNumber}}),Object.defineProperty(r,"isOfTypeString",{enumerable:!0,get:function(){return f.isOfTypeString}}),Object.defineProperty(r,"isOfTypeObject",{enumerable:!0,get:function(){return f.isOfTypeObject}}),Object.defineProperty(r,"isOfTypeDate",{enumerable:!0,get:function(){return f.isOfTypeDate}}),Object.defineProperty(r,"isOfTypeArray",{enumerable:!0,get:function(){return f.isOfTypeArray}}),Object.defineProperty(r,"isOfTypeBool",{enumerable:!0,get:function(){return f.isOfTypeBool}});var c=t(1);Object.defineProperty(r,"isPureObject",{enumerable:!0,get:function(){return c.isPureObject}}),Object.defineProperty(r,"isEmptyValue",{enumerable:!0,get:function(){return c.isEmptyValue}});var d=t(3);Object.defineProperty(r,"string",{enumerable:!0,get:function(){return d.string}}),Object.defineProperty(r,"dictionary",{enumerable:!0,get:function(){return d.dictionary}}),Object.defineProperty(r,"boolean",{enumerable:!0,get:function(){return d.boolean}}),Object.defineProperty(r,"arrayOf",{enumerable:!0,get:function(){return d.arrayOf}}),Object.defineProperty(r,"date",{enumerable:!0,get:function(){return d.date}}),Object.defineProperty(r,"number",{enumerable:!0,get:function(){return d.number}}),Object.defineProperty(r,"object",{enumerable:!0,get:function(){return d.object}}),Object.defineProperty(r,"PropertyDefinition",{enumerable:!0,get:function(){return d.PropertyDefinition}}),Object.defineProperty(r,"ValueTypes",{enumerable:!0,get:function(){return d.ValueTypes}});var p=t(13);function v(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"validate",{enumerable:!0,get:function(){return p.validate}})},function(e,t){e.exports=r},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.withinRange=r.isLtField=r.isLteToField=r.isGtField=r.isGteToField=r.isEqualToField=r.isLt=r.isLte=r.isGt=r.isGte=r.isNegative=r.isPositive=r.isInteger=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=t(0),u=t(2),o=t(1),l=(r.isInteger=function(e){var r=e.value,t=e.getter;if((0,o.isEmptyValue)(r))return null;var n=t(r);return Number.isInteger(n)?null:u.Errors.isInteger},r.isPositive=function(e){var r=e.value,t=e.getter;return(0,o.isEmptyValue)(r)?null:t(r)<0?u.Errors.isPositive:null},r.isNegative=function(e){var r=e.value,t=e.getter;return(0,o.isEmptyValue)(r)?null:t(r)>=0?u.Errors.isNegative:null},function(e,r,t,i,u,l,a){if((0,o.isEmptyValue)(e))return null;var s=null,f=u(e),c=u(i[r]);return(void 0===f?"undefined":n(f))===(void 0===c?"undefined":n(c))&&(s=l(f,c)?null:{error:a,params:{value:e,otherFieldValue:c,otherFieldLabel:t}}),s}),a=function(e,r,t,n,i){if((0,o.isEmptyValue)(e))return null;var u=null;return t=n(t),e=n(e),isNaN(e)||r(e,t)||(u={error:i,params:{value:e,threshold:t}}),u};r.isGte=function(e){return function(r){var t=r.value,n=r.getter;return a(t,i.gte,e,n,u.Errors.isGte)}},r.isGt=function(e){return function(r){var t=r.value,n=r.getter;return a(t,i.gt,e,n,u.Errors.isGt)}},r.isLte=function(e){return function(r){var t=r.value,n=r.getter;return a(t,i.lte,e,n,u.Errors.isLte)}},r.isLt=function(e){return function(r){var t=r.value,n=r.getter;return a(t,i.lt,e,n,u.Errors.isLt)}},r.isEqualToField=function(e,r){return function(t){var n=t.value,o=t.siblings,a=t.getter;return l(n,e,r,o,a,i.eq,u.Errors.isEqualToField)}},r.isGteToField=function(e,r){return function(t){var n=t.value,o=t.siblings,a=t.getter;return l(n,e,r,o,a,i.gte,u.Errors.isGteToField)}},r.isGtField=function(e,r){return function(t){var n=t.value,o=t.siblings,a=t.getter;return l(n,e,r,o,a,i.gt,u.Errors.isGtField)}},r.isLteToField=function(e,r){return function(t){var n=t.value,o=t.siblings,a=t.getter;return l(n,e,r,o,a,i.lte,u.Errors.isLteToField)}},r.isLtField=function(e,r){return function(t){var n=t.value,o=t.siblings,a=t.getter;return l(n,e,r,o,a,i.lt,u.Errors.isLtField)}},r.withinRange=function(e,r){return function(e,r){if((0,i.isNil)(e)||(0,i.isNil)(r))throw new Error("minValue and maxValue cannot be null");if(e>r)throw new Error("minValue > maxValue");if((void 0===e?"undefined":n(e))!==(void 0===r?"undefined":n(r)))throw new Error("range value must be of the same type")}(e,r),function(t){var n=t.value,i=t.getter;if((0,o.isEmptyValue)(n))return null;var l=i(n);return l<e||l>r?{error:u.Errors.withinRange,params:{value:n,minValue:e,maxValue:r}}:null}}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.requiredIfOtherFieldIsGiven=r.requiredIfOtherFieldIsNotEmpty=r.requiredIfOtherFieldIsEmpty=r.requiredIfOtherFieldEquals=r.requiredIfOtherFieldIsFalse=r.requiredIfOtherFieldIsTrue=r.required=void 0;var n=t(0),i=t(2),u=t(1),o=r.required=function(e){var r=e.value;return(0,u.isEmptyValue)(r)?i.Errors.required:null};r.requiredIfOtherFieldIsTrue=function(e){return function(r){return(0,n.get)(r.siblings,e,!1)?o(r):null}},r.requiredIfOtherFieldIsFalse=function(e){return function(r){return(0,n.get)(r.siblings,e,!0)?null:o(r)}},r.requiredIfOtherFieldEquals=function(e,r){r=(0,n.isArray)(r)?r:[r];var t=new Set(r);return function(r){var i=(0,n.get)(r.siblings,e,!1);return t.has(i)?o(r):null}},r.requiredIfOtherFieldIsEmpty=function(e){return function(r){var t=(0,n.get)(r.siblings,e,null);return(0,u.isEmptyValue)(t)?o(r):null}},r.requiredIfOtherFieldIsNotEmpty=function(e){return function(r){var t=(0,n.get)(r.siblings,e,null);return(0,u.isEmptyValue)(t)?null:o(r)}},r.requiredIfOtherFieldIsGiven=function(e){return function(r){var t=(0,n.get)(r.siblings,e,null);return(0,u.isEmptyValue)(t)?null:o(r)}}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.oneOf=r.maxLength=r.minLength=r.isEmail=void 0;var n=t(0),i=t(2),u=t(1),o=/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i;r.isEmail=function(e){var r=e.value;e.config;return(0,u.isEmptyValue)(r)?null:o.test(r)?null:i.Errors.isEmail},r.minLength=function(e){return function(r){var t=r.value,n=null;return!(0,u.isEmptyValue)(t)&&t.length<e&&(n={error:i.Errors.minLength,params:{value:t,minLength:e}}),n}},r.maxLength=function(e){return function(r){var t=r.value,n=null;return!(0,u.isEmptyValue)(t)&&t.length>e&&(n={error:i.Errors.maxLength,params:{value:t,maxLength:e}}),n}},r.oneOf=function(e){if(!(0,n.isArray)(e)||0===e.length)throw new Error("Invalid domain array given to oneOf");var r=new Set(e);return function(t){var n=t.value,o=null;return(0,u.isEmptyValue)(n)||r.has(n)||(o={error:i.Errors.oneOf,params:{value:n,domain:e}}),o}}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(0),i=t(1),u=t(3),o=t(5),l=function(e,r){if(r.valueType===u.ValueTypes.value)return r.transform(e);if((0,n.isArray)(e)&&r.collectionValidator.indexOf(o.isOfTypeArray)>-1){var t=r.validators;return e.map((function(e){return t.transform(e)}))}if((0,i.isPureObject)(e)&&r.collectionValidator.indexOf(o.isOfTypeObject)>-1){var l={};for(var s in e)l[s]=a(e[s],r.validators);return l}return e};function a(e,r){var t={};for(var n in e){var i=e[n],o=r[n];o instanceof u.PropertyDefinition?t[n]=l(i,o):t[n]=i&&o?a(i,o):i}return t}r.default=function(e,r){return a(e,r.schema)}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.validate=void 0;var n=t(0),i=t(3),u=function(e,r,t,i,u){var o=null;(0,n.isArray)(r)||(r=[r]);for(var l={value:e,getter:t,siblings:i,entity:u.entity,params:u.params},a=0;!o&&a<r.length;a++){o=(0,r[a])(l)}return o},o=function(e,r,t,o){if(r.valueType===i.ValueTypes.value)return u(e,r.validators,r.getter,t,o);if(r.collectionValidator){var a=u(e,r.collectionValidator,r.getter,t,o);if(a)return{_error:a}}return r.valueType===i.ValueTypes.collectionOfObjects?function(e,r,t){var i={};return(0,n.forEach)(e,(function(n,u){var o=l(e[u],r.validators,e[u],t);o&&(i[u.toString()]=o)})),(0,n.isEmpty)(i)?null:i}(e,r,o):function(e,r,t,i){var o={};return(0,n.forEach)(e,(function(t,n){var l=e[n],a=u(l,r.validators.validators,r.validators.getter,e,i);a&&(o[n.toString()]=a)})),(0,n.isEmpty)(o)?null:o}(e,r,0,o)},l=function e(r,t,u,l){var a={};for(var s in t){var f=r?r[s]:null,c=t[s],d=void 0;(d=c instanceof i.PropertyDefinition?o(f,c,u,l):e(f,c,f,l))&&(a[s]=d)}if(l.logUnknownProperties)for(var p in r)t[p]||(a[p]="sapin.unknownProperty");return(0,n.isEmpty)(a)?null:a};r.validate=function(e,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i={entity:e,params:t,logUnknownProperties:n};return l(e,r.schema,e,i)}}])}));
//# sourceMappingURL=sapin.min.js.map